{% extends "base.html" %}
<html>
 <!-- Sidebar Form -->
 <div id="sidebar" class="sidebar">
    <a href="javascript:void(0)" class="closebtn" id="closeSidebar">&times;</a>
    <form method="POST" action="/student/add_student">
        <h4>Add Student</h4>
         <!-- Student ID Field with Format ####-#### -->
            <div class="form-group">
              <label for="studentID">Student ID (Format: ####-####)</label>
              <input type="text" name="studentID" id="studentID" class="form-control" required pattern="\d{4}-\d{4}" placeholder="1234-5678">
          </div>

          <!-- Name Fields -->
          <div class="form-group">
              <label for="Name">Name</label>
              <input type="text" name="Name" id="Name" class="form-control" required>
          </div>

          <!-- Dropdowns for Year Level, Gender, Course, and College -->
        <div class="form-group">
            <label for="year_level">Year Level</label>
            <select name="year_level" id="year_level" class="form-control">
                <option value="1">1</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
            </select>
        </div>
        <div class="form-group">
            <label for="gender">Gender</label>
            <select name="gender" id="gender" class="form-control">
                <option value="Male">Male</option>
                <option value="Female">Female</option>
            </select>
        </div>
        <div class="form-group">
            <label for="course">Course</label>
            <select name="course" id="course" class="form-control">
                {% for course in courses %}
                <option value="{{ course }}">{{ course }}</option>
                {% endfor %}
            </select>
        </div>
        <div class="form-group">
            <label for="college">College</label>
            <select name="college" id="college" class="form-control">
                {% for college in colleges %}
                <option value="{{ college }}">{{ college }}</option>
                {% endfor %}
            </select>
        </div>

        <!-- Submit Button -->
        <button type="submit" class="btn btn-primary mt-3">Submit</button>
    </form>
  </div>
  
</html>
  
  <script>
    document.getElementById("openSidebar").addEventListener("click", function() {
        document.getElementById("sidebar").classList.add("sidebar-open");
    });
    
    document.getElementById("closeSidebar").addEventListener("click", function() {
        document.getElementById("sidebar").classList.remove("sidebar-open");
    });
    </script>

<script>
    // Handle opening the Add Student Sidebar
    document.getElementById("openAddSidebar").addEventListener("click", function() {
        // Clear the form inputs for the Add action
        document.getElementById("studentID").value = '';
        document.getElementById("Name").value = '';
        document.getElementById("year_level").value = '1'; // Default year level
        document.getElementById("gender").value = 'Male'; // Default gender
        document.getElementById("course").value = ''; // Clear course
        document.getElementById("college").value = ''; // Clear college
  
        // Open the sidebar for Add mode
        document.getElementById("sidebar").classList.add("sidebar-open");
    });
  
    // Handle opening the Edit Student Sidebar (set event listeners for each Edit button)
    document.querySelectorAll("openEditSidebar").forEach(function(editButton) {
      editButton.addEventListener("click", function(event) {
          // Get the row that was clicked on and extract the data
          var row = event.target.closest('tr');
          var studentID = row.querySelector('td:nth-child(1)').innerText;
          var studentName = row.querySelector('td:nth-child(2)').innerText;
          var yearLevel = row.querySelector('td:nth-child(3)').innerText;
          var gender = row.querySelector('td:nth-child(4)').innerText;
          var course = row.querySelector('td:nth-child(5)').innerText;
          var college = row.querySelector('td:nth-child(6)').innerText;
  
          // Pre-fill the form with the selected student's data
          document.getElementById("studentID").value = studentID;
          document.getElementById("Name").value = studentName;
          document.getElementById("year_level").value = yearLevel;
          document.getElementById("gender").value = gender;
          document.getElementById("course").value = course;
          document.getElementById("college").value = college;
  
          // Open the sidebar for Edit mode
          document.getElementById("sidebar").classList.add("sidebar-open");
      });
    });
  
    // Close the sidebar when the close button is clicked
    document.getElementById("closeSidebar").addEventListener("click", function() {
        document.getElementById("sidebar").classList.remove("sidebar-open");
    });
  </script>